(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9768],{39768:function(e,n,i){"use strict";i.d(n,{ks:function(){return checkIfUserExist},nN:function(){return Step3Heading},nm:function(){return Step3},s1:function(){return Step2Heading},tP:function(){return Step1},wJ:function(){return Step1Heading},yT:function(){return Step2}});var t=i(85893),a=i(67294),l=i(9473),s=i(6734),r=i(85611),c=i(97762),d=i(11163),o=i(5152),u=i.n(o),p=i(41664),m=i.n(p),_=i(82580),g=i(16310),h=i(34256),v=i(96579),S=i(21273),x=i(59043),N=i(55028),j=i(97083),f=i.n(j);let k=u()(()=>Promise.resolve().then(i.bind(i,28165)),{loadableGenerated:{webpack:()=>[28165]}}),C=u()(()=>Promise.resolve().then(i.bind(i,85516)),{loadableGenerated:{webpack:()=>[85516]}}),b=u()(()=>i.e(2925).then(i.bind(i,2925)),{loadableGenerated:{webpack:()=>[2925]}}),H=RegExp("^[A-Za-z0-9 .]*[A-Za-z0-9][A-Za-z0-9 .]*$"),checkIfUserExist=async(e,n)=>{var i,t;let a=await (0,v.dQ)(e),{error:l}=a;return[!((null==l?void 0:null===(i=l.response)||void 0===i?void 0:i.status)===404&&(null==l?void 0:null===(t=l.response)||void 0===t?void 0:t.data.code)==="USER_NOT_FOUND"),a]},useCheckIfUserExist=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,i=arguments.length>2?arguments[2]:void 0,t=(0,a.useRef)(null),[s,r]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),o=(0,l.I0)();return(0,a.useEffect)(()=>{null!==t.current&&clearTimeout(t.current);let handleKeyup=async e=>{let[n,i]=await checkIfUserExist(e,o);r(n),d(i)};return e&&(t.current=setTimeout(()=>{handleKeyup(e)},n)),()=>{clearTimeout(t.current)}},[e,n,i]),[s,c]},SignupSchema=e=>g.Ry().shape({nickname:g.Z_().min(4,e("claimNickname.validation.size")).max(20,e("claimNickname.validation.size")).matches(H,e("claimNickname.validation.normalChart")).required(e("required"))}),Step1Heading=()=>(0,t.jsxs)("div",{className:f().Step1Heading,children:[(0,t.jsxs)("div",{className:f().Step1Heading__content,children:[(0,t.jsxs)("div",{className:f().Step1Heading__text,children:[(0,t.jsx)("h2",{children:(0,t.jsx)(s.cC,{i18nKey:"claimNickname.step1.heading.title",children:"Claim nickname"})}),(0,t.jsx)("p",{children:(0,t.jsx)(s.cC,{i18nKey:"claimNickname.step1.heading.description",children:"Your friends will need to use this nickname to join your team"})})]}),(0,t.jsx)("div",{children:(0,t.jsx)(b,{className:f().Step1Heading__progress,progress:50})})]}),(0,t.jsx)(N.default,{loading:"eager",width:190,height:227,className:f().Step1Heading__img,src:"images/Components/Steps/step1ill.png",alt:"step1ill"}),(0,t.jsx)(N.default,{loading:"eager",width:190,height:227,className:f().Step1Heading__bg,src:"images/Components/Steps/step1-bg.svg",alt:"step1bg"})]}),Step1=e=>{var n;let{step:i,setStep:r}=e,{t:c}=(0,s.$G)(),[o,u]=(0,a.useState)(""),[p,m]=(0,a.useState)(null),[g,S]=(0,a.useState)(!1),[x,j]=(0,a.useState)(0),[b]=useCheckIfUserExist(o,500,x),{user:H}=(0,l.v9)(e=>e.user),y=(0,l.I0)(),w=(0,d.useRouter)(),E=null==w?void 0:null===(n=w.query)||void 0===n?void 0:n.referrer,[I,W]=useCheckIfUserExist(E,500,x);return((0,a.useEffect)(()=>{(null==H?void 0:H.username)&&(null==H?void 0:H.referredBy)&&w.push("/")},[null==H?void 0:H.username,null==H?void 0:H.referredBy]),null==H?void 0:H.id)?(0,t.jsx)("div",{className:f().Step1,children:(0,t.jsx)(_.J9,{validationSchema:SignupSchema(c),initialValues:{nickname:""},onSubmit:async e=>{var n,i,t,a;S(!0);let l={username:null==e?void 0:e.nickname,id:null==H?void 0:H.id};(null==W?void 0:W.id)&&(l.referredBy=null==W?void 0:W.id);let{error:s}=await (0,v.Nq)(l)(y);return(null==s?void 0:null===(n=s.response)||void 0===n?void 0:n.status)===409&&["CONFLICT_WITH_ANOTHER_USER"].includes(null==s?void 0:null===(i=s.response)||void 0===i?void 0:i.data.code)?(S(!1),j(x+1)):["REFERRAL_NOT_FOUND"].includes(null==s?void 0:null===(t=s.response)||void 0===t?void 0:t.data.code)?(m(null==s?void 0:null===(a=s.response)||void 0===a?void 0:a.data.code),S(!1)):(S(!1),w.push("/claim-nickname?step=".concat((null==W?void 0:W.id)?3:2)))},children:e=>{let{isValid:n,errors:i,initialValues:a,values:l,handleSubmit:r,handleChange:d}=e;return(0,t.jsxs)(_.l0,{children:[(0,t.jsx)(h.default,{name:"nickname",onKeyUp:e=>{(null==l?void 0:l.nickname)&&!i.nickname&&u(e.target.value)},onChange:e=>d(e),defaultValue:null==a?void 0:a.nickname,error:(null==i?void 0:i.nickname)||b&&c("errors.NicknameTaken")||p,placeholder:c("claimNickname.step1.content.placeholder"),img:"icons/user.svg"}),(0,t.jsxs)("div",{className:f().Step1__description,children:[(0,t.jsx)(N.default,{loading:"eager",className:f().Step1__image,width:24,height:24,src:"icons/info.svg",alt:"info"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:(0,t.jsx)(s.cC,{i18nKey:"claimNickname.step1.content.description",children:"When creating a nickname, use only letters, numbers, and periods."})}),(0,t.jsx)("p",{children:(0,t.jsxs)(s.cC,{i18nKey:"claimNickname.step1.content.example",children:["Example: ",(0,t.jsx)("strong",{children:"your.name01"})]})})]})]}),(0,t.jsx)(k,{loading:g,className:f().Step1__button,disabled:!(null==l?void 0:l.nickname)||!n||b,children:(0,t.jsx)(s.cC,{i18nKey:"claimNickname.step1.content.button",children:"Next step"})})]})}},null==H?void 0:H.id)}):(0,t.jsx)("div",{children:(0,t.jsx)(C,{white:!1})})},Step2Heading=()=>(0,t.jsxs)("div",{className:f().Step1Heading,children:[(0,t.jsxs)("div",{className:f().Step1Heading__content,children:[(0,t.jsxs)("div",{className:f().Step1Heading__text,children:[(0,t.jsx)("h2",{children:(0,t.jsx)(s.cC,{i18nKey:"claimNickname.step2.heading.title",children:"Who invited you?"})}),(0,t.jsx)("p",{children:(0,t.jsx)(s.cC,{i18nKey:"claimNickname.step2.heading.description",children:"Enter the nickname of the person who invited you"})})]}),(0,t.jsx)("div",{children:(0,t.jsx)(b,{className:f().Step1Heading__progress,progress:90})})]}),(0,t.jsx)(N.default,{loading:"eager",width:237,height:240,className:f().Step1Heading__img,src:"images/Components/Steps/step2ill.png",alt:"step2ill"}),(0,t.jsx)(N.default,{loading:"eager",width:190,height:227,className:f().Step1Heading__bg,src:"images/Components/Steps/step2-bg.svg",alt:"step2bg"})]}),Step2=e=>{let{setStep:n,step:i}=e,{t:c}=(0,s.$G)(),[d,o]=(0,a.useState)(!1),[u,p]=(0,a.useState)(""),[m,g]=(0,a.useState)(0),[S,x]=useCheckIfUserExist(u,500,m),{addToast:j}=(0,r.e1)(),{user:C}=(0,l.v9)(e=>e.user),{userInfo:b,username:H,id:y}=C||{},w=(null==b?void 0:b.username)||H,E=w&&w.toLowerCase().trim()===u.toLowerCase().trim(),I=(0,l.I0)();return(0,a.useEffect)(()=>{(null==b?void 0:b.referredBy)&&router.push("/")},[null==b?void 0:b.referredBy]),(0,t.jsx)("div",{className:f().Step1,children:(0,t.jsx)(_.J9,{validationSchema:SignupSchema(c),initialValues:{nickname:""},onSubmit:async()=>{var e,t;if(o(!0),!x){o(!1);return}let{error:a}=await (0,v.Nq)({referredBy:null==x?void 0:x.id,id:y})(I);return(null==a?void 0:null===(e=a.response)||void 0===e?void 0:e.status)===404&&(null==a?void 0:null===(t=a.response)||void 0===t?void 0:t.data.code)==="REFERRAL_NOT_FOUND"?(o(!1),j(a.message,{appearance:"error",autoDismiss:!0,autoDismissTimeout:2e3}),g(m+1)):(o(!1),n(i+1))},children:e=>{let{isValid:n,errors:i,initialValues:a,values:l,handleSubmit:r,handleChange:o}=e;return(0,t.jsxs)(_.l0,{children:[(0,t.jsx)(h.default,{name:"nickname",onKeyUp:e=>{(null==l?void 0:l.nickname)&&!i.nickname&&p(e.target.value)},onChange:e=>o(e),defaultValue:null==a?void 0:a.nickname,error:(null==i?void 0:i.nickname)||E&&"Same nickname is not allowed."||!1===S&&"Nickname not found.",placeholder:c("claimNickname.step2.content.placeholder"),img:"icons/user.svg"}),(0,t.jsxs)("div",{className:f().Step1__description,children:[(0,t.jsx)(N.default,{loading:"eager",className:f().Step1__image,width:24,height:24,src:"icons/info.svg",alt:"info"}),(0,t.jsx)("div",{children:(0,t.jsx)("p",{children:(0,t.jsx)(s.cC,{i18nKey:"claimNickname.step2.content.description",children:"By completing this step, you and your friend will both receive a 25% bonus on the base earning rate when you are both checking-in at the same time."})})})]}),(0,t.jsx)(k,{loading:d,className:f().Step1__button,disabled:!(null==l?void 0:l.nickname)||!n||!S||E,children:(0,t.jsx)(s.cC,{i18nKey:"claimNickname.step2.content.button",children:"Next step"})})]})}})})},Step3Heading=()=>{let{t:e}=(0,s.$G)(),n=c.renderToString((0,t.jsx)(N.default,{loading:"eager",width:16,height:16,src:"images/logo.svg",alt:"logo"}));return(0,t.jsxs)("div",{className:f().Step1Heading,children:[(0,t.jsxs)("div",{className:f().Step1Heading__content,children:[(0,t.jsxs)("div",{className:"".concat(f().Step1Heading__text," ").concat(f().Step3Heading__text),children:[(0,t.jsx)("h2",{children:(0,t.jsx)(s.cC,{i18nKey:"claimNickname.step3.heading.title",children:"Welcome reward"})}),(0,t.jsx)("p",{dangerouslySetInnerHTML:{__html:e("claimNickname.step3.heading.description",{image:"".concat(n),coin:S.sS})}})]}),(0,t.jsx)("div",{children:(0,t.jsx)(b,{className:f().Step1Heading__progress,progress:90})})]}),(0,t.jsx)(N.default,{loading:"eager",width:322,height:246,className:f().Step1Heading__img,src:"images/Components/Steps/step3ill.png",alt:"step3"}),(0,t.jsx)(N.default,{loading:"eager",width:190,height:227,className:f().Step1Heading__bg,src:"images/Components/Steps/step3-bg.svg",alt:"step3bg"})]})},Step3=()=>{let{t:e}=(0,s.$G)(),{user:n,balance:i}=(0,l.v9)(e=>e.user),r=(0,l.I0)();return(0,a.useEffect)(()=>{let onMount=async()=>{await (0,v.m_)({userId:null==n?void 0:n.id})(r)};(null==n?void 0:n.id)&&!Object.keys(i).length&&onMount()},[n]),(0,t.jsxs)("div",{className:f().Step1,children:[(0,t.jsx)(N.default,{loading:"eager",width:169,height:169,className:f().Step3__lines,src:"images/Components/Steps/lines.svg",alt:"lines"}),(0,t.jsxs)("div",{className:f().Step3__balance,children:[(0,t.jsx)("h3",{children:(0,t.jsx)(s.cC,{i18nKey:"claimNickname.currentBalance",children:"YOUR CURRENT BALANCE"})}),(0,t.jsxs)("div",{children:["+ ",(0,x.jT)(null==i?void 0:i.total)," ",(0,t.jsxs)("span",{children:[(0,t.jsx)(N.default,{loading:"eager",width:20,height:20,src:"images/logo.svg",alt:"step-3"})," ",S.sS]})]})]}),(0,t.jsx)(m(),{href:"/",children:(0,t.jsx)(k,{className:f().Step1__button,children:(0,t.jsx)(s.cC,{i18nKey:"claimNickname.step2.content.button",children:"Next step"})})})]})}},34256:function(e,n,i){"use strict";i.r(n);var t=i(85893),a=i(67294),l=i(55028),s=i(20969),r=i.n(s);n.default=e=>{let{children:n,img:i,imgHeight:s=24,imgWidth:c=24,value:d,defaultValue:o,error:u,placeholder:p,name:m,setFieldValue:_,onChange:g,onFocus:h,onBlur:v,...S}=e,[x,N]=(0,a.useState)(!1),[j,f]=(0,a.useState)(!1);return(0,t.jsxs)("div",{className:r().inputWrapper,children:[(0,t.jsx)(l.default,{loading:"eager",className:r().img,width:s,height:c,src:i,alt:m}),(0,t.jsx)("div",{className:"".concat(r().placeholder," ").concat(i&&r().placeholder__img," ").concat(u?r().placeholderWithError:""," ").concat(x||j||d||o?r().placeholderWithValue:""),children:u||p}),(0,t.jsx)("div",{className:r().info,children:u&&(0,t.jsx)(l.default,{loading:"eager",width:20,height:20,src:"icons/info-err.svg",alt:"error"})}),(0,t.jsx)("input",{onFocus:e=>{N(!0),h&&h(e)},onBlur:e=>{N(!1),v&&v(e)},onChange:e=>{f(!!e.target.value),g&&g(e),_&&_(m,e.target.value)},className:"".concat(r().input," ").concat(u?r().inputWithError:""," ").concat(x||d||o||j?r().inputWithValue:""," ").concat(i&&r().inputWithImage),defaultValue:o,name:m,...S})]})}},59043:function(e,n,i){"use strict";i.d(n,{BP:function(){return removeTrailingZeros},jT:function(){return formatWithSup}});var t=i(85893);let addSeparator=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),formatWithSup=function(e){var n,i;let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1],l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,s=!(arguments.length>3)||void 0===arguments[3]||arguments[3],r=null===(i=e||"0".concat(s?".00":""))||void 0===i?void 0:null===(n=i.toString())||void 0===n?void 0:n.split(".");return(r.length>1?r:[...r,"00"]).map((e,n,i)=>{if(n>0){let i=e.length>2?e.slice(0,l):1===e.length?"".concat(e,"0"):e;return s?a?(0,t.jsx)("sup",{children:i},i+n):i:""}return a?(0,t.jsx)("span",{children:"".concat(addSeparator(e)).concat(i.length>1&&s?".":"")},e+n):"".concat(addSeparator(e)).concat(i.length>1&&s?".":"")})},removeTrailingZeros=e=>(e[0]+e[1]).replace(/(\.\d*?[1-9])0+$/g,"$1").replace(/\.0+$/,"")},97083:function(e){e.exports={Step1Heading:"ClaimNickname_Step1Heading__yyGHP",Step1Heading__content:"ClaimNickname_Step1Heading__content__ofcwu",Step1Heading__text:"ClaimNickname_Step1Heading__text__OBoIx",Step1Heading__img:"ClaimNickname_Step1Heading__img__bSFUk",Step1Heading__bg:"ClaimNickname_Step1Heading__bg__h_n7T",Step1Heading__progress:"ClaimNickname_Step1Heading__progress__shy9k",Step2Heading__img:"ClaimNickname_Step2Heading__img__DqUQF",Step3Heading__img:"ClaimNickname_Step3Heading__img__PZODC",Step3Heading__text:"ClaimNickname_Step3Heading__text__SGruN",Step1:"ClaimNickname_Step1__WNULE",Step1__image:"ClaimNickname_Step1__image__gOnn3",Step1__button:"ClaimNickname_Step1__button__qgbzP",Step1__description:"ClaimNickname_Step1__description__L_fa6",Step3__balance:"ClaimNickname_Step3__balance__cqUGZ",Step3__lines:"ClaimNickname_Step3__lines__3Pier"}},20969:function(e){e.exports={inputWrapper:"Input_inputWrapper__N2wt7",input:"Input_input__kg_9z",inputWithImage:"Input_inputWithImage__ib2RW",img:"Input_img__d19S_",placeholder:"Input_placeholder__zFevW",placeholder__img:"Input_placeholder__img__N0a3M",placeholderWithValue:"Input_placeholderWithValue__g74FU",placeholderWithError:"Input_placeholderWithError__ZLLI5",inputWithValue:"Input_inputWithValue__7u5T4",inputWithError:"Input_inputWithError__Xwyxw",info:"Input_info__9YI7b"}}}]);